Pixastic.Actions.desaturate={process:function(a){var b=!!(a.options.average&&a.options.average!="false");if(Pixastic.Client.hasCanvasImageData()){var c=Pixastic.prepareData(a);var d=a.options.rect;var e=d.width;var f=d.height;var g=e*f;var h=g*4,i,j;if(b){while(g--)c[h-=4]=c[i=h+1]=c[j=h+2]=(c[h]+c[i]+c[j])/3}else{while(g--)c[h-=4]=c[i=h+1]=c[j=h+2]=c[h]*.3+c[i]*.59+c[j]*.11}return true}else if(Pixastic.Client.isIE()){a.image.style.filter+=" gray";return true}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()||Pixastic.Client.isIE()}}
